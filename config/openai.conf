[app]
name = "modal-armor"
version = "1.0.0"
host = "0.0.0.0"
port = 5000
debug = false

[security]
api_key_enabled = false
cors_enabled = true

[scanners]
vectordb_enabled = true
yara_enabled = true
transformer_enabled = true
similarity_enabled = true
sentiment_enabled = false

vectordb_weight = 0.35
yara_weight = 0.30
transformer_weight = 0.35

[vectordb]
type = "chromadb"
path = "data/vectordb"
collection_name = "modal_armor_threats"
embedding_model = "text-embedding-ada-002"  # OpenAI embedding
embedding_dimension = 1536  # ada-002 dimension
similarity_threshold = 0.85
top_k = 5
auto_update_enabled = true

[transformer]
model_name = "deepset/deberta-v3-base-injection"
device = "cpu"
threshold = 0.98

[yara]
rules_path = "data/yara_rules"
compiled_rules_path = "data/yara_rules/compiled_rules.yarc"
auto_compile = true

[similarity]
enabled = true
threshold = 0.15
model = "text-embedding-ada-002"  # Use OpenAI for consistency

[canary]
enabled = true
default_length = 16
default_header = "<-@!-- {canary} --@!->"
storage_path = "data/canary_tokens.db"

[openai]
enabled = true
api_key = ""  # Set via OPENAI_API_KEY environment variable
model = "gpt-3.5-turbo"
embedding_model = "text-embedding-ada-002"

[logging]
level = "INFO"
format = "json"
file = "logs/modal_armor.log"
log_detections = true
log_path = "logs/detections.jsonl"

[performance]
batch_size = 32
timeout_seconds = 30
cache_enabled = true
